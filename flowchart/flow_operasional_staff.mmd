flowchart TD
    A[Staff Login] --> B[Pilih menu 'Kasus Baru'<br/><br/>endpoint: POST /service-cases]
    B --> C[Pilih Service Type<br/>mis: Pendirian PT<br/><br/>endpoint: GET /service-types]
    C --> D[Input data klien & detail perusahaan]
    D --> E[Submit -> Sistem buat Case<br/>+ generate CaseStage dari Workflow aktif<br/><br/>endpoint: POST /case-stages]

    E --> F[Staff buka detail Case]
    F --> G[Tampilkan daftar tahapan berurutan<br/>Verifikasi Nama, Draft Akta, dst.<br/><br/>endpoint: GET /workflow-templates/:id/stages]

    G --> H[Pilih tahap pertama yang statusnya PENDING]
    H --> I[Kerjakan tahap tersebut di dunia nyata]

    I --> J[Upload Evidence sesuai instruksi<br/>Screenshot / PDF / Foto<br/><br/> endpoint: POST /evidences]
    J --> K{Evidence sudah ter-upload?}
    K -- Belum --> J
    K -- Ya --> L[Update status tahap menjadi COMPLETED<br/><br/>endpoint: PATCH /case-stages/:id/status]

    L --> M{Masih ada tahap berikutnya?}
    M -- Ya --> H
    M -- Tidak --> N[Update status Case menjadi COMPLETED<br/><br/>endpoint: PATCH /service-cases/:id/status]

%% Bagian untuk Klien
    E --> O[Klien membuka halaman tracking<br/>pakai trackingCode<br/><br/>endpoint: GET /service-cases/track/:trackingCode]
    O --> P[System tampilkan timeline tahapan:<br/>tahap selesai, sedang jalan, dan pending]

